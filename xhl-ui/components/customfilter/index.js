import{ElIcon as e,ElInput as t,ElPopover as a,ElConfigProvider as n,ElCheckbox as l,ElMessage as o,ElInputNumber as s,ElDatePicker as r,ElDropdownItem as p,ElDropdownMenu as c,ElDropdown as i}from"element-plus/es";import{useCssVars as u,unref as d,toRefs as m,ref as f,computed as v,watch as h,openBlock as _,createBlock as y,withCtx as g,createVNode as x,createElementVNode as w,createCommentVNode as k,toDisplayString as V,withModifiers as b,nextTick as I,pushScopeId as D,popScopeId as S,createElementBlock as C,Fragment as U,renderList as P,withDirectives as L,vShow as R,createTextVNode as z,onMounted as T,normalizeStyle as j,h as N}from"vue";import{elnamespace as E}from"../../hooks/configElement.js";import{s as F}from"../../index-BZ10B04v.js";import{flattenObjectArray as O}from"../../tools/utils.js";import A from"element-plus/dist/locale/zh-cn.mjs";import{s as $}from"../../style-inject.es-BnTDb6vU.js";import{useDebounceFn as W}from"@vueuse/core";const Y=e=>(D("data-v-6f2c177d"),e=e(),S(),e),B={class:"custominput",ref:"customInputNode"},K=Y((()=>w("i",{class:"custom custom-arrow"},null,-1))),M={class:"lable_name"},q=[Y((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],G={class:"tree_select_area"};var H={__name:"selectTree",props:{placeholder:{type:String,default:""},name:{type:String,default:""},width:{type:String,default:""},paddingLeft:{type:String,default:"11px"},filterType:{type:String,default:""},from:{type:String,default:""},propInputData:{type:Array,default:()=>[]},renderTree:{type:Array,default:()=>[]},showCheckBox:{type:Boolean,default:!0},onlyUser:{default:"",type:String}},emits:["emitParams","update:propInputData","resetValue","removeFilter"],setup(l,{emit:o}){u((e=>({"6f2c177d-fontSize":"14px","6f2c177d-customWidth":d(U),"6f2c177d-paddLeft":d(C)})));const s=l,{propInputData:r,renderTree:p,filterType:c}=m(s),i=o,D=f(null),S=v((()=>O(p.value,"list"))),C=s.name?`${s.name.length+1}em`:s.paddingLeft,U=s.width||"200px",P=f(""),L=new Map([]);function R(e){e.check?L.set(e.data.deptUserId,d(e.data)):L.delete(e.data.deptUserId)}function z(){let e=Array.from(L);"onlyUser"==s.onlyUser&&(e=e.filter((e=>1==e[1].infoType))),e=e.map((e=>e[1].id)),i("update:propInputData",e)}function T(){P.value?(i("update:propInputData",[]),L.clear(),D.value.treeRef.setCheckedKeys([]),I((()=>{i("resetValue")}))):i("removeFilter")}return h(P,(e=>{i("emitParams")})),h(r,(e=>{!function(e){let t="",a=[];e&&e.length&&e.forEach(((e,t)=>{const n=S.value.find((t=>t.id==e));n&&a.push(n)})),a.forEach(((e,n)=>{t+=`${e.name}`,n!=a.length-1&&(t+="|")})),P.value=t}(e)}),{immediate:!0}),(o,s)=>{const i=e,u=t,m=a,f=n;return _(),y(f,{namespace:d(E),locale:d(A)},{default:g((()=>[x(m,{placement:"bottom",trigger:"click",width:d(U),onAfterLeave:z},{reference:g((()=>[w("section",B,[x(u,{modelValue:P.value,"onUpdate:modelValue":s[0]||(s[0]=e=>P.value=e),clearable:!0,readonly:"",placeholder:l.placeholder},{suffix:g((()=>[k(' <el-icon class="el-input__icon">\n                            <CircleClose></CircleClose>\n                        </el-icon> '),x(i,{class:"el-input__icon"},{default:g((()=>[K])),_:1})])),_:1},8,["modelValue","placeholder"]),w("span",M,V(l.name),1),k(" 删除按钮 "),w("span",{class:"delete",onClick:b(T,["stop"])},[...q])],512)])),default:g((()=>[w("div",G,[x(F,{ref_key:"customTreeNode",ref:D,data:d(p),"wrap-height":"300",showSearch:d(c),currentChecked:d(r),"show-checkbox":l.showCheckBox,onCheckChange:R},null,8,["data","showSearch","currentChecked","show-checkbox"])])])),_:1},8,["width"])])),_:1},8,["namespace","locale"])}}};$(".custominput[data-v-6f2c177d] {\n  position: relative;\n  font-size: var(--6f2c177d-fontSize);\n  width: var(--6f2c177d-customWidth);\n}\n.custominput[data-v-6f2c177d] .xhl-el-input__wrapper {\n  padding-left: var(--6f2c177d-paddLeft);\n}\n.custominput .lable_name[data-v-6f2c177d] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.5em;\n}\n.custominput .delete[data-v-6f2c177d] {\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translate(50%, -50%);\n  cursor: pointer;\n  display: none;\n  font-size: 16px;\n  color: #909399;\n}\n.custominput:hover .delete[data-v-6f2c177d] {\n  display: block;\n}\n.custominput .custom-arrow[data-v-6f2c177d] {\n  transform: rotate(180deg);\n}\n.custominput .tree_select_area[data-v-6f2c177d] {\n  width: 100%;\n  overflow-x: auto;\n}\n[data-v-6f2c177d] .filter_commpoent {\n  padding-right: 0;\n}");$(""),H.__scopeId="data-v-6f2c177d",H.__file="src/components/customfilter/components/selectTree.vue";const J=e=>(D("data-v-00f0e760"),e=e(),S(),e),Q={class:"custominput",ref:"customInputNode"},X=J((()=>w("i",{class:"custom custom-arrow"},null,-1))),Z={class:"lable_name"},ee=[J((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],te={class:"popover_select_area"},ae=J((()=>w("i",{class:"custom custom-journey-search"},null,-1))),ne={class:"scroll_list_check"},le=["onClick"],oe={class:"empty_status"};var se={__name:"customSelect",props:{placeholder:{type:String,default:""},name:{type:String,default:""},width:{type:String,default:""},paddingLeft:{type:String,default:"11px"},options:{type:Array,default:()=>[]},listOptionName:{default:"nameCn"},propInputData:{type:Array,default:()=>[]}},emits:["emitParams","update:propInputData","resetValue","removeFilter"],setup(o,{emit:s}){u((e=>({"00f0e760-fontSize":"14px","00f0e760-customWidth":d(D),"00f0e760-paddLeft":d(I)})));const r=o,{propInputData:p,options:c}=m(r),i=s;N(!1);const I=r.name?`${r.name.length+1}em`:r.paddingLeft,D=r.width||"200px",S=f(""),z=f(""),T=v((()=>c.value.find((e=>e[r.listOptionName].includes(z.value)))));function j(){S.value?(i("update:propInputData",[]),N(!1),i("resetValue")):i("removeFilter")}function N(e){c.value.forEach((t=>{t.check=e}))}function F(){let e=c.value.filter((e=>e.check));e=e.map((e=>e.id)),i("update:propInputData",e)}return h(S,(e=>{i("emitParams")})),h(p,(e=>{!function(e){let t="",a=[];e&&e.length&&e.forEach(((e,t)=>{const n=c.value.find((t=>(t.id==e&&(t.check=!0),t.id==e)));n&&a.push(n)})),a.forEach(((e,n)=>{t+=`${e[r.listOptionName]}`,n!=a.length-1&&(t+="|")})),S.value=t}(e)}),{immediate:!0}),(s,p)=>{const i=e,u=t,m=l,f=a,v=n;return _(),y(v,{namespace:d(E),locale:d(A)},{default:g((()=>[x(f,{placement:"bottom",trigger:"click",width:d(D),onAfterLeave:F,"popper-class":"customSelectPop"},{reference:g((()=>[w("div",Q,[x(u,{modelValue:S.value,"onUpdate:modelValue":p[0]||(p[0]=e=>S.value=e),clearable:!1,readonly:"",placeholder:o.placeholder},{suffix:g((()=>[x(i,{class:"el-input__icon"},{default:g((()=>[X])),_:1})])),_:1},8,["modelValue","placeholder"]),w("span",Z,V(o.name),1),k(" 删除按钮 "),w("span",{class:"delete",onClick:b(j,["stop"])},[...ee])],512)])),default:g((()=>[w("div",te,[x(u,{modelValue:z.value,"onUpdate:modelValue":p[1]||(p[1]=e=>z.value=e),placeholder:o.placeholder},{suffix:g((()=>[x(i,{class:"el-input__icon"},{default:g((()=>[ae])),_:1})])),_:1},8,["modelValue","placeholder"]),w("section",ne,[(_(!0),C(U,null,P(d(c),(e=>L((_(),C("div",{class:"list_item_wrap",key:e.id,onClick:t=>function(e){e.check=!e.check}(e)},[x(m,{"model-value":e.check,label:e[r.listOptionName],size:"large"},null,8,["model-value","label"])],8,le)),[[R,e[r.listOptionName].includes(z.value)]]))),128)),L(w("div",oe," 暂无数据 ",512),[[R,!T.value]])])])])),_:1},8,["width"])])),_:1},8,["namespace","locale"])}}};$(".custominput[data-v-00f0e760] {\n  position: relative;\n  font-size: var(--00f0e760-fontSize);\n  width: var(--00f0e760-customWidth);\n}\n.custominput[data-v-00f0e760] .xhl-el-input__wrapper {\n  padding-left: var(--00f0e760-paddLeft);\n}\n.custominput .lable_name[data-v-00f0e760] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.5em;\n}\n.custominput .delete[data-v-00f0e760] {\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translate(50%, -50%);\n  cursor: pointer;\n  display: none;\n  font-size: 16px;\n  color: #909399;\n}\n.custominput:hover .delete[data-v-00f0e760] {\n  display: block;\n}\n.custominput .custom-arrow[data-v-00f0e760] {\n  transform: rotate(180deg);\n}");$(".customSelectPop {\n  padding: 10px 0 !important;\n}\n.customSelectPop .popover_select_area {\n  width: 100%;\n  padding: 0 12px;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n.customSelectPop .popover_select_area .xhl-el-input {\n  width: 100%;\n  align-self: center;\n}\n.customSelectPop .popover_select_area .scroll_list_check {\n  max-height: 200px;\n  overflow-y: auto;\n}\n.customSelectPop .popover_select_area .scroll_list_check .empty_status {\n  width: 100%;\n  text-align: center;\n  line-height: 32px;\n  color: #606266;\n  opacity: 0.8;\n}\n.customSelectPop .popover_select_area .list_item_wrap {\n  font-size: var(--el-font-size-base);\n  position: relative;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: var(--el-text-color-regular);\n  height: 34px;\n  line-height: 34px;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.customSelectPop .popover_select_area .list_item_wrap:hover {\n  background: #f5f7fa;\n}"),se.__scopeId="data-v-00f0e760",se.__file="src/components/customfilter/components/customSelect.vue";const re={class:"custominput",ref:"customInputNode"},pe={class:"lable_name"},ce=[(e=>(D("data-v-3e57d8e2"),e=e(),S(),e))((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],ie={class:"tree_select_area"};var ue={__name:"customInputNumber",props:{placeholder:{type:String,default:""},name:{type:String,default:""},width:{type:String,default:"auto"},paddingLeft:{type:String,default:"11px"},propInputData:{type:Array,default:()=>[]}},emits:["emitParams","update:propInputData","resetValue","removeFilter"],setup(e,{emit:l}){u((e=>({"3e57d8e2-fontSize":"14px","3e57d8e2-customWidth":d(v),"3e57d8e2-paddLeft":d(i)})));const r=e,{propInputData:p}=m(r),c=l,i=r.name?`${r.name.length+1}em`:r.paddingLeft,v=r.width||"200px",D=f(""),S=f(1),C=f(1);function U(){if(S.value>C.value)return o.warning("请输入正确数字范围");const e=[S.value,C.value];c("update:propInputData",e)}function P(){D.value?(c("update:propInputData",[]),I((()=>{c("resetValue")}))):c("removeFilter")}return h(D,(e=>{c("emitParams")})),h(p,(e=>{!function(e){let t="";t=`${S.value} - ${C.value}`,D.value=t}()})),(l,o)=>{const r=t,p=s,c=a,i=n;return _(),y(i,{namespace:d(E),locale:d(A)},{default:g((()=>[x(c,{placement:"bottom",trigger:"click",width:"250px",onAfterLeave:U,"popper-class":"customSelectTreePop"},{reference:g((()=>[w("section",re,[x(r,{modelValue:D.value,"onUpdate:modelValue":o[0]||(o[0]=e=>D.value=e),clearable:!1,readonly:"",placeholder:e.placeholder},null,8,["modelValue","placeholder"]),w("span",pe,V(e.name),1),k(" 删除按钮 "),w("span",{class:"delete",onClick:b(P,["stop"])},[...ce])],512)])),default:g((()=>[w("div",ie,[x(p,{modelValue:S.value,"onUpdate:modelValue":o[1]||(o[1]=e=>S.value=e),min:0,"controls-position":"right"},null,8,["modelValue"]),z(" - "),x(p,{modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=e=>C.value=e),min:0,"controls-position":"right"},null,8,["modelValue"])])])),_:1})])),_:1},8,["namespace","locale"])}}};$(".custominput[data-v-3e57d8e2] {\n  position: relative;\n  font-size: var(--3e57d8e2-fontSize);\n  width: var(--3e57d8e2-customWidth);\n}\n.custominput[data-v-3e57d8e2] .xhl-el-input__wrapper {\n  padding-left: var(--3e57d8e2-paddLeft);\n}\n.custominput .lable_name[data-v-3e57d8e2] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.5em;\n}\n.custominput .delete[data-v-3e57d8e2] {\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translate(50%, -50%);\n  cursor: pointer;\n  display: none;\n}\n.custominput:hover .delete[data-v-3e57d8e2] {\n  display: block;\n}\n.custominput .custom-arrow[data-v-3e57d8e2] {\n  transform: rotate(180deg);\n}\n.tree_select_area[data-v-3e57d8e2] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}");$(""),ue.__scopeId="data-v-3e57d8e2",ue.__file="src/components/customfilter/components/customInputNumber.vue";const de=e=>(D("data-v-64c42d08"),e=e(),S(),e),me={class:"right_title"},fe=de((()=>w("i",{class:"custom custom-journey-search"},null,-1))),ve=["onClick"],he=[de((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],_e={key:3,class:"custominput customDate"},ye=["onClick"],ge=[de((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],xe={key:4,class:"custominput customDate"},we=["onClick"],ke=[de((()=>w("i",{class:"custom custom-close-circle"},null,-1)))],Ve={class:"el-dropdown-link"};var be={__name:"index",props:{paramList:{default:()=>[]}},emits:["valueChange"],setup(a,{emit:l}){const s=a,u=l,{paramList:h}=m(s),I=f({}),D=v((()=>Object.keys(h.value).some((e=>!h.value[e].hide&&!h.value[e].notRemovable)))),S=W((e=>{u("valueChange",I.value)}),50);function F(e,t){"delete"==t?(h.value[e].hide=!1,delete I.value[e]):(h.value[e].hide=!1,delete I.value[e],S())}function O(e){return N("div",{class:"dateLabel"},e)}function $(e){e.Value=null}return T((()=>{if(h.value){Object.keys(h.value).forEach((e=>{h.value[e].notRemovable&&(I.value[e]=h.value[e])}))}})),(a,l)=>{const s=e,u=t,m=r,f=p,v=c,T=i,N=n;return _(),y(N,{namespace:d(E),locale:d(A)},{default:g((()=>[w("span",me,[(_(!0),C(U,null,P(I.value,((e,t)=>(_(),C(U,{key:t},[k(" 模板渲染  普通搜索框"),"input"==e.type?(_(),C("section",{key:0,class:"custominput",style:j({width:e.width})},[x(u,{modelValue:e.Value,"onUpdate:modelValue":t=>e.Value=t,onChange:d(S),placeholder:e.placeholder},{suffix:g((()=>[x(s,{class:"el-input__icon"},{default:g((()=>[fe])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"]),k(" 删除按钮 "),e.notRemovable?k("v-if",!0):(_(),C("span",{key:0,class:"delete",onClick:b((a=>F(t,e.Value?null:"delete")),["stop"])},[...he],8,ve))],4)):k("v-if",!0),k(" 模板渲染  树结构搜索"),"tree"==e.type?(_(),y(H,{key:1,name:e.name,propInputData:e.Value,"onUpdate:propInputData":t=>e.Value=t,renderTree:e.renderTree,onlyUser:e.onlyUser,onEmitParams:d(S),onResetValue:e=>F(t),onRemoveFilter:e=>F(t,"delete"),filterType:e.filterType,width:e.width,placeholder:e.placeholder},null,8,["name","propInputData","onUpdate:propInputData","renderTree","onlyUser","onEmitParams","onResetValue","onRemoveFilter","filterType","width","placeholder"])):k("v-if",!0),k(" 模板渲染  多选下拉框搜索"),"select"==e.type?(_(),y(se,{key:2,name:e.name,propInputData:e.Value,"onUpdate:propInputData":t=>e.Value=t,onEmitParams:d(S),options:e.options,listOptionName:e.OptionName,onResetValue:e=>F(t),onRemoveFilter:e=>F(t,"delete"),width:e.width,placeholder:e.placeholder},null,8,["name","propInputData","onUpdate:propInputData","onEmitParams","options","listOptionName","onResetValue","onRemoveFilter","width","placeholder"])):k("v-if",!0),k(" 日期选择 "),"date"==e.type?(_(),C("section",_e,[x(m,{modelValue:e.Value,"onUpdate:modelValue":t=>e.Value=t,onChange:d(S),placeholder:e.placeholder,clearable:!1,"prefix-icon":O(e.name),type:"date"},null,8,["modelValue","onUpdate:modelValue","onChange","placeholder","prefix-icon"]),k(" 删除按钮 "),e.notRemovable?k("v-if",!0):(_(),C("span",{key:0,class:"delete",onClick:b((a=>(F(t,e.Value?null:"delete"),$(e))),["stop"])},[...ge],8,ye))])):k("v-if",!0),k(" 日期范围选择 "),"daterange"==e.type?(_(),C("section",xe,[x(m,{modelValue:e.Value,"onUpdate:modelValue":t=>e.Value=t,onChange:d(S),clearable:!1,"prefix-icon":O(e.name),type:"daterange","start-placeholder":e.splaceholder,"end-placeholder":e.eplaceholder},null,8,["modelValue","onUpdate:modelValue","onChange","prefix-icon","start-placeholder","end-placeholder"]),k(" 删除按钮 "),e.notRemovable?k("v-if",!0):(_(),C("span",{key:0,class:"delete",onClick:b((a=>(F(t,e.Value?null:"delete"),$(e))),["stop"])},[...ke],8,we))])):k("v-if",!0),k(" 数字选择组件 "),"inputnumber"==e.type?(_(),y(ue,{key:5,name:e.name,propInputData:e.Value,"onUpdate:propInputData":t=>e.Value=t,onEmitParams:d(S),onResetValue:e=>F(t),onRemoveFilter:e=>F(t,"delete"),width:"140px",placeholder:e.placeholder},null,8,["name","propInputData","onUpdate:propInputData","onEmitParams","onResetValue","onRemoveFilter","placeholder"])):k("v-if",!0)],64)))),128)),w("section",null,[x(T,{trigger:"click"},{dropdown:g((()=>[x(v,null,{default:g((()=>[(_(!0),C(U,null,P(Object.keys(d(h)),(e=>{return _(),C(U,{key:e},[(t=d(h)[e],t.notRemovable||t.hide?k("v-if",!0):(_(),y(f,{key:0,onClick:t=>function(e){Object.keys(I.value).length>=10?o.warning("筛选条件不能超过10个"):(h.value[e].hide=!0,I.value[e]=h.value[e])}(e)},{default:g((()=>[z(V(d(h)[e].name),1)])),_:2},1032,["onClick"])))],64);var t})),128))])),_:1})])),default:g((()=>[L(w("span",Ve,[k(' <i class="custom  custom-add2"></i> '),z(" 增加 ")],512),[[R,D.value]])])),_:1})])])])),_:1},8,["namespace","locale"])}}};$(".right_title[data-v-64c42d08] {\n  margin: 10px 0;\n  display: flex;\n  gap: 6px;\n  align-items: center;\n  flex: 1;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n}\n.right_title[data-v-64c42d08] .custominput {\n  margin-right: 10px;\n}\n.custominput[data-v-64c42d08] {\n  position: relative;\n}\n.custominput .lable_name[data-v-64c42d08] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.5em;\n}\n.custominput .delete[data-v-64c42d08] {\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translate(50%, -50%);\n  cursor: pointer;\n  display: none;\n  font-size: 16px;\n  color: #909399;\n}\n.custominput:hover .delete[data-v-64c42d08] {\n  display: block;\n}\n.custominput .custom-arrow[data-v-64c42d08] {\n  transform: rotate(180deg);\n}\n.custominput .tree_select_area[data-v-64c42d08] {\n  width: 100%;\n  overflow-x: auto;\n}\n.customDate[data-v-64c42d08] .xhl-el-input__prefix .xhl-el-icon {\n  width: auto;\n}\n.customDate[data-v-64c42d08] .xhl-el-range__icon {\n  width: auto;\n}\n.customDate[data-v-64c42d08] .dateLabel {\n  font-style: normal;\n  color: #303133;\n}\n.customDate[data-v-64c42d08] .xhl-el-range-input {\n  width: 35%;\n}\n.customDate[data-v-64c42d08] .xhl-el-input__suffix {\n  display: none;\n}\n.custom-add2[data-v-64c42d08] {\n  font-size: 30px;\n  color: #a8abb2;\n  cursor: pointer;\n}"),be.__scopeId="data-v-64c42d08",be.__file="src/components/customfilter/index.vue",be.install=e=>{e.component("customfilter",be)};export{be as default};
